#: import solarized ELiDE.style.solarized
#: import StiffScrollEffect kivy.garden.stiffscroll.StiffScrollEffect
#: import resource_find kivy.resources.resource_find
<ELiDELayout>:
    engine: self.app.engine
    ScrollView:
        effect_cls: StiffScrollEffect
        id: boardview
        size_hint: (0.85, 0.9)
        pos_hint: {'left': 0, 'top': 1}
        Board:
            id: board
            layout: root
            app: root.app
            engine: root.app.engine
            character: self.engine.character[self.app.config['ELiDE']['boardchar']]
            arrowlayout: arrowlayout
            spotlayout: spotlayout
            size_hint: (None, None)
            size: wallpaper.size
            arrow_bg: (0.5, 0.5, 0.5, 0.5)
            arrow_fg: (1.0, 1.0, 1.0, 1.0)
            arrowhead_size: 10
            Image:
                id: wallpaper
                source: resource_find(root.app.config['ELiDE']['wallpaper'])
                size_hint: (None, None)
                size: self.texture_size
            BoardLayout:
                id: arrowlayout
            BoardLayout:
                id: spotlayout
    BoxLayout:
        id: timemenu
        pos_hint: {'bot': 0}
        size_hint: (0.85, 0.1)
        orientation: 'horizontal'
        BoxLayout:
            orientation: 'vertical'
            Label:
                text: 'Simulate'
            BoxLayout:
                orientation: 'horizontal'
                ToggleButton:
                    text: 'Play'
                Button:
                    text: 'Step'
                    on_press: root.next_tick()
        BoxLayout:
            orientation: 'vertical'
            Label:
                text: 'Branch'
            MenuTextInput:
                setter: root.set_branch
                hint_text: root.branch
        BoxLayout:
            orientation: 'vertical'
            Label:
                text: 'Tick'
            MenuIntInput:
                setter: root.set_tick
                hint_text: str(root.tick)
    BoxLayout:
        id: charmenu
        orientation: 'vertical'
        size_hint_x: 0.15
        pos_hint: {'right': 1}
        Button:
            # click this to change the active character
            text: 'Character:\n' + root.app.config['ELiDE']['boardchar']
        Button:
            # opens a popover where you view the rules active on this
            # character now, and may click one to edit it
            text: "Rules"
        Button:
            # deletes whatever you've got selected
            text: "Delete"
        Button:
            # This doesn't interact with the time travel, it's
            # strictly a way to go back on erroneous inputs from this
            # same tick. As such it grays out when you change the time.
            text: "Undo"
        Button:
            text: "Add place"
        Button:
            text: "Connect places"
        Button:
            halign: "center"
            text: "Add thing\nto place"
